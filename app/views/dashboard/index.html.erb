<div class="container mx-auto px-4 py-8">
  <h1 class="text-2xl font-bold mb-6">ダッシュボード</h1>

  <div class="bg-white rounded-lg shadow-md p-6 mb-6">
    <h2 class="text-xl font-semibold mb-4">接続済みアカウント</h2>

    <% if @authentications.any? %>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <% @authentications.each do |auth| %>
          <div class="border rounded-lg p-4 flex items-center">
            <div class="mr-4">
              <% if auth.provider == 'github' %>
                <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.481C17.139 18.2 20 14.442 20 10.017 20 4.484 15.522 0 10 0z" clip-rule="evenodd" />
                </svg>
              <% elsif auth.provider == 'twitter2' %>
                <svg class="w-8 h-8 text-blue-400" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
              <% end %>
            </div>
            <div>
              <p class="font-medium"><%= auth.provider.capitalize %></p>
              <p class="text-sm text-gray-500">
                <% if auth.info.present? && auth.info['info'].present? %>
                  <%= auth.info['info']['nickname'] || auth.info['info']['name'] || auth.uid %>
                <% else %>
                  <%= auth.uid %>
                <% end %>
              </p>
              <% if auth.expires_at.present? %>
                <p class="text-xs text-gray-400">
                  有効期限: <%= auth.expires_at > Time.current ? l(auth.expires_at, format: :short) : '期限切れ' %>
                </p>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="text-gray-500">接続されているアカウントはありません。</p>
    <% end %>

    <div class="mt-4">
      <h3 class="text-lg font-medium mb-2">アカウントを追加</h3>
      <div class="flex space-x-2">
        <% unless @authentications.exists?(provider: 'github') %>
          <%= button_to '/auth/github', method: :post, data: { turbo: false }, class: "flex items-center justify-center bg-gray-800 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded" do %>
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.481C17.139 18.2 20 14.442 20 10.017 20 4.484 15.522 0 10 0z" clip-rule="evenodd" />
            </svg>
            GitHub連携
          <% end %>
        <% end %>

        <% unless @authentications.exists?(provider: 'twitter2') %>
          <%= button_to '/auth/twitter2', method: :post, data: { turbo: false }, class: "flex items-center justify-center bg-blue-400 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded" do %>
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
            </svg>
            Twitter連携
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="bg-white rounded-lg shadow-md p-6">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-semibold">投稿</h2>
      <%= link_to '新規投稿', new_post_path, class: "bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded" %>
    </div>

    <% if @posts.any? %>
      <div class="space-y-4">
        <% @posts.each do |post| %>
          <div class="border rounded-lg p-4">
            <h3 class="text-lg font-medium"><%= post.title %></h3>
            <div class="flex items-center mt-2 text-sm text-gray-500">
              <span class="mr-4"><%= l post.created_at, format: :short %></span>
              <span class="px-2 py-1 rounded <%= post.published? ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800' %>">
                <%= post.status %>
              </span>
            </div>
            <div class="mt-4 flex justify-end space-x-2">
              <%= link_to '詳細', post_path(post), class: "text-blue-500 hover:text-blue-700" %>
              <%= link_to '編集', edit_post_path(post), class: "text-blue-500 hover:text-blue-700" %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="text-gray-500">投稿はまだありません。</p>
    <% end %>
  </div>
</div>